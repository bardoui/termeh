@use "sass:math";
@use "../termeh" as T;

$-gaps: T.var("input", "gaps", ());
$-colors: T.var("input", "colors", ());

select {
    @include T.control();
    display: block;
    max-width: 100%;
    width: 100%;
    padding: T.el-pad(T.gap("element"));
    background-color: T.color("input");
    border: 1px solid T.color("separator");
    border-radius: T.var("radius", "normal");
    accent-color: T.color("primary");

    @include T.placeholder {
        color: T.muted(T.color("input"), T.color("foreground"));
    }

    &:focus,
    &.is-focused {
        border-color: T.color("primary");
    }

    &.is-failed,
    &:invalid {
        border-color: T.color("error");
    }

    @each $name, $gap in T.gaps($-gaps) {
        &.is-#{$name}-padded {
            padding: T.el-pad($gap);
        }
    }

    @each $name, $color in T.colors($-colors) {
        &.is-#{$name} {
            accent-color: $color;

            &:focus,
            &.is-focused {
                border-color: $color;
            }

            &::selection {
                background-color: $color;
                color: T.foreground($color);
            }
        }
    }

    &[disabled],
    fieldset[disabled] &,
    &.is-disabled {
        @include T.locked();
        background: T.disabled(T.color("input")) !important;
        border-color: T.disabled(T.color("input"), true) !important;
        color: T.muted(T.color("input"), T.color("foreground")) !important;
    }
}
